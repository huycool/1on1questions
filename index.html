<!DOCTYPE html>
<html lang="en" data-theme="light">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/@picocss/pico@latest/css/pico.min.css">
    <title>1on1 Questions</title>
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>
<style>
    .flipcard {
        margin: 5px;
        width: 100%;
        height: 200px;
        transform-style: preserve-3d;
        transition: transform 1s;
        transform-origin: right center;
    }

    .flipcard div {
        display: block;
        position: absolute;
        width: 100%;
        height: 100%;
        backface-visibility: hidden;
    }

    .flipcard.front {
        background: #9cceff;
        margin: 20px;
    }

    .flipcard .back {
        background: #9cceff;
        transform: rotateY(180deg);
    }

    .flipcard.flipped {
        transform: translateX(-100%) rotateY(-180deg);
    }

    .cards {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(230px, 1fr));
        grid-gap: 10px;
        /* max-width: 800px; */
        margin: 1em auto;
    }

    .card {
        display: grid;
        grid-template-rows: max-content 200px 1fr;
        border: 1px solid #eee;
        border-radius: 3px;
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
        transition: 0.3s;
        cursor: pointer;
        background-color: lightgrey;
    }

    .card:hover {
        box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.2);
    }
</style>

<body>
    <div class="container">
        <div x-data="questions">
            <div class="cards">
                <template x-for="q in questions" :key="q.id">
                    <div x-data="{ isFlipped: false }">
                        <div class="flipcard card" @click="isFlipped = !isFlipped" :class="isFlipped ? 'flipped' :''">
                            <!-- <header class="category">
                                <strong x-text="q.category"></strong>
                            </header> -->

                            <div class="front" style="padding: 10px; text-align: center;">
                                <blockquote style="border: none">
                                    <strong x-text="q.category"></strong>
                                </blockquote>
                            </div>
                            <div class="back" style="padding: 10px">
                                <blockquote x-text="q.question" style="font-style:italic;"></blockquote>
                            </div>
                            </p>

                        </div>
                </template>
            </div>
            <div>
                <button @click="getData()">More ...</button>
            </div>
        </div>

    </div>
</body>

</html>
<script>

    document.addEventListener('alpine:init', () => {
        Alpine.data('questions', () => ({
            async init() {
                await this.getData();
            },
            loadedData: [],
            questions: [],
            async getData() {
                if (this.loadedData.length == 0) {
                    const response = await fetch('questions.json');
                    if (!response.ok)
                        alert(`Something went wrong: ${response.status} - ${response.statusText}`);
                    this.loadedData = await response.json();
                }
                this.questions = shuffle(this.loadedData);
                this.questions = this.questions.slice(0, 4);
            }
        }))
    })

    function shuffle(a) {
        for (let i = a.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [a[i], a[j]] = [a[j], a[i]];
        }
        return a;
    }
</script>