<!DOCTYPE html>
<html lang="en" data-theme="light">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/@picocss/pico@latest/css/pico.min.css">
    <title>1on1 Questions</title>
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>
<style>
    * {
        user-select: none;
    }

    .container {
        width: 500px;
        height: 1000px;
        perspective: 800px;
    }

    header,
    p {
        text-align: center;
        font: 30px Calibri Light;
    }


    #acard {
        margin: 20px;
        width: 200px;
        height: 200px;
        transform-style: preserve-3d;
        transition: transform 1s;
        transform-origin: right center;
    }

    #acard div {
        display: block;
        position: absolute;
        width: 200px;
        height: 200px;
        backface-visibility: hidden;
    }

    #acard .front {
        background: #ffe49e;
    }

    #acard .back {
        background: #ffe49e;
        transform: rotateX(180deg);
    }

    #acard.flipped {
        transform: rotateY(180deg) rotateZ(0deg) rotateZ(180deg);
    }





    #doorcard {
        margin: 20px;
        width: 200px;
        height: 200px;
        transform-style: preserve-3d;
        transition: transform 1s;
        transform-origin: right center;
    }

    #doorcard div {
        display: block;
        position: absolute;
        width: 100%;
        height: 100%;
        backface-visibility: hidden;
    }

    #doorcard .front {
        background: #ff9e9e;
    }

    #doorcard .back {
        background: #ff9e9e;
        transform: rotateY(180deg);
    }

    #doorcard.flipped {
        transform: rotateY(180deg);
    }





    #spincard {
        margin: 20px;
        width: 200px;
        height: 200px;
        transform-style: preserve-3d;
        transition: transform 1s;
        transform-origin: right center;
    }

    #spincard div {
        display: block;
        position: absolute;
        width: 100%;
        height: 100%;
        backface-visibility: hidden;
    }

    #spincard .front {
        background: #9effad;
    }

    #spincard .back {
        background: #9effad;
        transform: rotateX(180deg);
    }

    #spincard.flipped {
        transform: rotateX(-180deg);
    }

    .flipcard {
        margin: 20px;
        width: 200px;
        height: 200px;
        transform-style: preserve-3d;
        transition: transform 1s;
        transform-origin: right center;
    }

    .flipcard div {
        display: block;
        position: absolute;
        width: 100%;
        height: 100%;
        backface-visibility: hidden;
    }

    .flipcard.front {
        background: #9cceff;
        vertical-align: middle;
    }

    .flipcard .back {
        background: #9cceff;
        transform: rotateY(180deg);
    }

    .flipcard.flipped {
        transform: translateX(-100%) rotateY(-180deg);
    }
</style>

<body>
    <div class="container">
        <div x-data="questions">
            <div style="display: flex;">
                <template x-for="q in questions" :key="q.id">
                    <div x-data="{ isFlipped: false }">
                        <div class="flipcard" @click="isFlipped = !isFlipped" :class="isFlipped ? 'flipped' :''">
                            <!-- <header class="category">
                                <strong x-text="q.category"></strong>
                            </header> -->
                            <div class="front">
                                <em x-text="q.category"></em>
                            </div>
                            <div class="back">
                                <em x-text="q.question"></em>
                            </div>
                            </article>
                        </div>
                </template>
            </div>
            <div>
                <button @click="getData()">More ...</button>
            </div>
        </div>

    </div>night
</body>

</html>
<script>

    document.addEventListener('alpine:init', () => {
        Alpine.data('questions', () => ({
            async init() {
                await this.getData();
            },
            loadedData: [],
            questions: [],
            async getData() {
                if (this.loadedData.length == 0) {
                    const response = await fetch('questions.json');
                    if (!response.ok)
                        alert(`Something went wrong: ${response.status} - ${response.statusText}`);
                    this.loadedData = await response.json();
                }
                this.questions = shuffle(this.loadedData);
                this.questions = this.questions.slice(0, 3);
            }
        }))
    })

    function shuffle(a) {
        for (let i = a.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [a[i], a[j]] = [a[j], a[i]];
        }
        return a;
    }
</script>